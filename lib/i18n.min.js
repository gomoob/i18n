!function(e,r){if(e&&"function"==typeof define&&define.amd)define(["jquery","node-polyglot"],function(s,t){return e.Editor=r(e,s,t)});else if("undefined"!=typeof exports){var s=require("jquery"),t=require("node-polyglot");module.exports=r(e,s,t)}else e.Editor=r(e,e._,e.Polyglot)}(this,function(e,r,s){"use strict";var t=s.prototype;return s=function(e){var r=e||{};this.phrases={},this.extend(r.phrases||{}),this.currentLocale=r.locale||"en";var s=r.allowMissing?transformPhrase:null;this.onMissingKey="function"==typeof r.onMissingKey?r.onMissingKey:s,this.warn=r.warn||function(e){console.warn("WARNING: "+e)},this.urlBuilder=r.urlBuilder,this.phrasesCache={},this.currentType=r&&r.type?r.type:"__default__",this.currentVersion=r&&r.version?r.version:"__default__",this.cache(this.currentType,this.currentLocale,this.currentVersion,this.phrases)},s.prototype=t,s.prototype.type=function(e){return e&&(this.currentType=e),this.currentType},s.prototype.version=function(e){return e&&(this.currentVersion=e),this.currentVersion},s.prototype.cache=function(e,r,s,t){0!==Object.keys(this.phrases).length&&(this.phrasesCache[e]||(this.phrasesCache[e]={}),this.phrasesCache[e][r]||(this.phrasesCache[e][r]={}),this.phrasesCache[e][r][s]=t)},s.prototype.load=function(e){var s=e.locale||this.currentLocale,t=e.type||this.currentType,i=e.version||this.currentVersion;if(!e.forceReload&&this.phrasesCache[t]&&this.phrasesCache[t][s])if(i&&!this.phrasesCache[t][s][i])delete this.phrasesCache[t][s];else if(this.replace(this.phrasesCache[t][s][i]),e&&e.success)return void e.success(this.phrasesCache[t][s][i]);if(!this.urlBuilder)throw new Error("No 'urlBuilder' has been defined !");r.ajax({dataType:"json",url:this.urlBuilder(t,s,i),success:r.proxy(function(r,n,h){this.replace(r),this.cache(t,s,i,r),e&&e.success&&e.success(r,n,h)},this),error:function(r,s,t){e&&e.error&&e.error(r,s,t)}})},s});
//# sourceMappingURL=i18n.min.js.map